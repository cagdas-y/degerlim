<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title style="font-family: 'Great Vibes', cursive; letter-spacing: 3px; color: #d4af37;">✨ Elifnazımmmm ✨</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Great+Vibes&family=Montserrat:wght@300;400;500&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg-color: #050510;
            --bg-gradient: radial-gradient(circle at 50% 50%, #1a0b2e 0%, #000000 100%);
            --card-width: 360px;
            --card-height: 620px;
            --paper-color: #fdfbf7;
            --gold-primary: #d4af37;
            --gold-shadow: #8a6e3e;
            --text-dark: #2d2d2d;
            --cover-bg: linear-gradient(135deg, #1a0b2e 0%, #000000 100%);
            --anim-speed: 0.8s;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg-color);
            background-image: var(--bg-gradient);
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
        }

        .scene {
            width: var(--card-width);
            height: var(--card-height);
            position: relative;
            perspective: 2000px;
        }

        .stack {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transform: rotateX(5deg);
        }

        /* KART YAPISI */
        .card {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: var(--paper-color);
            border-radius: 12px;
            transform-origin: left center;
            transition: transform var(--anim-speed) cubic-bezier(0.645, 0.045, 0.355, 1), opacity 0.8s ease;
            transform-style: preserve-3d;
            box-shadow: 20px 0 60px rgba(0, 0, 0, 0.6), inset 5px 0 20px rgba(0, 0, 0, 0.05);
            border: 1px solid #e0e0e0;
            border-left: 4px solid var(--gold-shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 25px;
            text-align: center;
            overflow: hidden;
            backface-visibility: hidden;
        }

        .card.flipped {
            transform: rotateY(-130deg) scale(1.1);
            opacity: 0;
            pointer-events: none;
        }

        /* KAPAK */
        .card.cover-design {
            background: var(--cover-bg);
            color: #fff;
            border: 4px solid var(--gold-primary);
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.9);
        }

        .shimmer-text {
            font-family: 'Great Vibes', cursive;
            font-size: 5rem;
            margin: 10px 0;
            line-height: 1.5;
            padding: 0 10px;
            background: linear-gradient(to right, #bf953f, #fcf6ba, #b38728, #fbf5b7, #aa771c);
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.6));
            animation: shine 3s linear infinite;
        }

        @keyframes shine {
            to {
                background-position: 200% center;
            }
        }

        .ornament {
            font-size: 35px;
            color: var(--gold-primary);
            margin: 5px 0;
        }

        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            color: #333;
            margin-bottom: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            border-bottom: 2px solid var(--gold-primary);
            padding-bottom: 5px;
        }

        .type-area {
            font-size: 1.4rem;
            line-height: 1.6;
            color: #252525;
            min-height: 80px;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            font-style: italic;
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1.2rem;
            background: #333;
            animation: blink 0.8s infinite;
            margin-left: 2px;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        .page-num {
            position: absolute;
            bottom: 15px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            color: #aaa;
        }

        /* PANEL - Genel Çerçeve */
        .panel {
            width: 100%;
            height: 160px;
            border: 2px solid #555;
            border-radius: 8px;
            margin: 15px 0;
            position: relative;
            overflow: hidden;
            background: #eee;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.2);
        }

        /* --- 1. HAVA DURUMU --- */
        .scene-weather {
            background: #87CEEB;
            position: relative;
            overflow: hidden;
            transition: background 1s ease;
        }

        .sun-orb {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, #ffd700, #ff8f00);
            border-radius: 50%;
            box-shadow: 0 0 30px #ffd700;
            z-index: 1;
            transition: 1s;
        }

        .cloud-complex {
            position: absolute;
            width: 60px;
            height: 60px;
            background: #fff;
            border-radius: 50%;
            box-shadow:
                40px 10px 0 -5px #fff,
                -30px 10px 0 -5px #fff,
                20px -20px 0 0px #fff;
            z-index: 2;
            opacity: 0.9;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.1));
        }

        .cc1 {
            top: 20px;
            left: -150px;
            transform: scale(0.8);
        }

        .cc2 {
            top: 50px;
            right: -150px;
            transform: scale(1);
        }

        .cc3 {
            top: -50px;
            left: 40%;
            transform: scale(1.2);
        }

        .rain-drop {
            position: absolute;
            background-color: rgba(255, 255, 255, 0.7);
            width: 2px;
            height: 10px;
            top: -20px;
            border-radius: 2px;
            z-index: 3;
            opacity: 0;
            filter: blur(0.5px);
        }

        .lightning-flash {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 4;
            opacity: 0;
            pointer-events: none;
        }

        .bolt {
            position: absolute;
            top: -50px;
            left: 50%;
            width: 100px;
            height: 150px;
            background: transparent;
            filter: drop-shadow(0 0 10px #fff);
            z-index: 5;
            opacity: 0;
            transform: translateX(-50%);
        }

        .bolt::before {
            content: '';
            position: absolute;
            width: 5px;
            height: 60px;
            background: #fff;
            transform: skewX(-20deg);
            top: 0;
            left: 30px;
        }

        .bolt::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 80px;
            background: #fff;
            transform: skewX(10deg);
            top: 55px;
            left: 20px;
        }

        .active .scene-weather {
            animation: stormSky 6s infinite;
        }

        .active .sun-orb {
            animation: sunHide 6s infinite;
        }

        .active .cc1 {
            animation: cloudMove1 6s infinite, cloudDarken 6s infinite;
        }

        .active .cc2 {
            animation: cloudMove2 6s infinite, cloudDarken 6s infinite;
        }

        .active .cc3 {
            animation: cloudMove3 6s infinite, cloudDarken 6s infinite;
        }

        .active .rd {
            animation: rainFall 0.8s linear infinite;
        }

        .rd:nth-child(1) {
            left: 10%;
            animation-delay: 0s;
            animation-duration: 0.7s;
        }

        .rd:nth-child(2) {
            left: 30%;
            animation-delay: 0.2s;
            animation-duration: 0.8s;
        }

        .rd:nth-child(3) {
            left: 50%;
            animation-delay: 0.5s;
            animation-duration: 0.6s;
        }

        .rd:nth-child(4) {
            left: 70%;
            animation-delay: 0.1s;
            animation-duration: 0.75s;
        }

        .rd:nth-child(5) {
            left: 90%;
            animation-delay: 0.3s;
            animation-duration: 0.85s;
        }

        .rd:nth-child(6) {
            left: 20%;
            animation-delay: 0.6s;
            animation-duration: 0.7s;
        }

        .rd:nth-child(7) {
            left: 40%;
            animation-delay: 0.4s;
            animation-duration: 0.9s;
        }

        .rd:nth-child(8) {
            left: 60%;
            animation-delay: 0.15s;
            animation-duration: 0.65s;
        }

        .rd:nth-child(9) {
            left: 80%;
            animation-delay: 0.35s;
            animation-duration: 0.8s;
        }

        .rd:nth-child(10) {
            left: 15%;
            animation-delay: 0.05s;
            animation-duration: 0.7s;
        }

        .rd:nth-child(11) {
            left: 35%;
            animation-delay: 0.25s;
            animation-duration: 0.75s;
        }

        .rd:nth-child(12) {
            left: 55%;
            animation-delay: 0.45s;
            animation-duration: 0.65s;
        }

        .active .lightning-flash {
            animation: flashScreen 6s infinite;
        }

        .active .bolt {
            animation: flashBolt 6s infinite;
        }

        @keyframes stormSky {

            0%,
            20% {
                background: #87CEEB;
            }

            30%,
            70% {
                background: #1c2331;
            }

            80%,
            100% {
                background: #87CEEB;
            }
        }

        @keyframes sunHide {

            0%,
            20% {
                opacity: 1;
                transform: translateY(0);
            }

            30%,
            70% {
                opacity: 0;
                transform: translateY(50px);
            }

            80%,
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes cloudDarken {

            0%,
            20% {
                background: #fff;
                box-shadow: 40px 10px 0 -5px #fff, -30px 10px 0 -5px #fff, 20px -20px 0 0px #fff;
            }

            30%,
            70% {
                background: #546e7a;
                box-shadow: 40px 10px 0 -5px #546e7a, -30px 10px 0 -5px #546e7a, 20px -20px 0 0px #546e7a;
            }

            80%,
            100% {
                background: #fff;
                box-shadow: 40px 10px 0 -5px #fff, -30px 10px 0 -5px #fff, 20px -20px 0 0px #fff;
            }
        }

        @keyframes cloudMove1 {
            0% {
                left: -150px
            }

            30%,
            70% {
                left: 20px
            }

            100% {
                left: -150px
            }
        }

        @keyframes cloudMove2 {
            0% {
                right: -150px
            }

            30%,
            70% {
                right: 20px
            }

            100% {
                right: -150px
            }
        }

        @keyframes cloudMove3 {
            0% {
                top: -100px
            }

            30%,
            70% {
                top: 10px
            }

            100% {
                top: -100px
            }
        }

        @keyframes rainFall {
            0% {
                top: -20px;
                opacity: 1;
            }

            100% {
                top: 200px;
                opacity: 0;
            }
        }

        @keyframes flashScreen {

            0%,
            40% {
                opacity: 0;
            }

            41%,
            43% {
                opacity: 0.8;
            }

            44% {
                opacity: 0;
            }

            46%,
            48% {
                opacity: 0.4;
            }

            50%,
            100% {
                opacity: 0;
            }
        }

        @keyframes flashBolt {

            0%,
            40% {
                opacity: 0;
            }

            41%,
            43% {
                opacity: 1;
            }

            44% {
                opacity: 0;
            }

            100% {
                opacity: 0;
            }
        }


        /* --- 2. GÜVEN (SİNEMATİK FENER) --- */
        .scene-lighthouse {
            background: linear-gradient(to bottom, #020024 0%, #090979 100%);
            position: relative;
            overflow: hidden;
        }

        .ocean-waves {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background: #006064;
            z-index: 2;
            opacity: 0.8;
        }

        .wave-shape {
            position: absolute;
            top: -20px;
            left: 0;
            width: 200%;
            height: 40px;
            background: #006064;
            border-radius: 50%;
        }

        .active .ocean-waves {
            animation: waveMove 4s infinite linear alternate;
        }

        .rock-base {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 30px;
            background: #3e2723;
            border-radius: 50% 50% 0 0;
            z-index: 3;
        }

        .lighthouse-tower {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 90px;
            background: repeating-linear-gradient(45deg, #d32f2f, #d32f2f 10px, #fff 10px, #fff 20px);
            clip-path: polygon(20% 0, 80% 0, 100% 100%, 0% 100%);
            z-index: 4;
        }

        .lantern-room {
            position: absolute;
            bottom: 110px;
            left: 50%;
            transform: translateX(-50%);
            width: 14px;
            height: 14px;
            background: #ffeb3b;
            border-radius: 2px;
            box-shadow: 0 0 20px #ffeb3b;
            z-index: 5;
        }

        .beacon-beam {
            position: absolute;
            top: 43px;
            left: 50%;
            width: 400px;
            height: 400px;
            transform: translate(-50%, -50%);
            background: conic-gradient(from 180deg,
                    transparent 0deg,
                    transparent 140deg,
                    rgba(255, 235, 59, 0.1) 160deg,
                    rgba(255, 235, 59, 0.7) 180deg,
                    rgba(255, 235, 59, 0.1) 200deg,
                    transparent 220deg);
            border-radius: 50%;
            mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 65%);
            -webkit-mask-image: radial-gradient(circle, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0) 65%);
            z-index: 6;
            opacity: 0;
            pointer-events: none;
            mix-blend-mode: screen;
        }

        .active .beacon-beam {
            animation: rotateBeacon 5s infinite linear;
            opacity: 1;
        }

        @keyframes waveMove {
            0% {
                transform: translateX(-10px);
            }

            100% {
                transform: translateX(10px);
            }
        }

        @keyframes rotateBeacon {
            from {
                transform: translate(-50%, -50%) rotate(0deg);
            }

            to {
                transform: translate(-50%, -50%) rotate(360deg);
            }
        }


        /* --- 3. KUM SAATİ --- */
        .scene-time {
            background: #263238;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .glass-container {
            width: 50px;
            height: 90px;
            position: relative;
        }

        .glass-top {
            width: 50px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #90a4ae;
            border-bottom: none;
            border-radius: 5px 5px 25px 25px;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }

        .glass-bot {
            width: 50px;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #90a4ae;
            border-top: none;
            border-radius: 25px 25px 5px 5px;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }

        .sand-u {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffd54f;
            transform-origin: bottom;
        }

        .sand-l {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-bottom: 40px solid #ffd54f;
            transform: scale(0);
            transform-origin: bottom;
        }

        .stream {
            position: absolute;
            top: 43px;
            left: 50%;
            width: 2px;
            height: 47px;
            background: #ffd54f;
            transform: translateX(-50%);
            z-index: 1;
            opacity: 0;
        }

        .active .sand-u {
            animation: drain 4s linear infinite;
        }

        .active .sand-l {
            animation: fill 4s linear infinite;
        }

        .active .stream {
            opacity: 1;
        }

        @keyframes drain {
            0% {
                height: 100%;
            }

            100% {
                height: 0%;
            }
        }

        @keyframes fill {
            0% {
                transform: translateX(-50%) scale(0);
            }

            100% {
                transform: translateX(-50%) scale(1);
            }
        }

        /* --- 4. YOLCULUK --- */
        .scene-road {
            background: linear-gradient(#111, #444);
            perspective: 80px;
            overflow: hidden;
        }

        .road-3d {
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) rotateX(45deg);
            width: 200px;
            height: 100%;
            background: #222;
            border-left: 3px solid #555;
            border-right: 3px solid #555;
            overflow: hidden;
        }

        .stripe-dashed {
            position: absolute;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 200%;
            background: repeating-linear-gradient(to bottom, #fff 0px, #fff 40px, transparent 40px, transparent 80px);
        }

        .active .stripe-dashed {
            animation: drive3D 0.5s linear infinite;
        }

        @keyframes drive3D {
            from {
                top: -80px;
            }

            to {
                top: 0px;
            }
        }

        /* --- 5. GÖKYÜZÜ (GELİŞTİRİLMİŞ) --- */
        .scene-moon {
            background: radial-gradient(circle at 50% 100%, #1a237e 0%, #000 100%);
            overflow: hidden;
            position: relative;
        }

        .moon-glow {
            position: absolute;
            top: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 40px #fff;
            opacity: 0.9;
            z-index: 2;
        }

        .crater {
            position: absolute;
            background: #ddd;
            border-radius: 50%;
            opacity: 0.5;
        }

        .cr1 {
            width: 10px;
            height: 10px;
            top: 15px;
            left: 10px;
        }

        .cr2 {
            width: 15px;
            height: 15px;
            bottom: 15px;
            right: 15px;
        }

        /* ÇOKLU YILDIZLAR */
        .tiny-star {
            position: absolute;
            background: #fff;
            width: 2px;
            height: 2px;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 3px #fff;
        }

        .active .ts1 {
            top: 20%;
            left: 15%;
            animation: blinkStar 2s infinite;
        }

        .active .ts2 {
            top: 70%;
            left: 50%;
            animation: blinkStar 3s infinite 0.5s;
        }

        .active .ts3 {
            top: 40%;
            left: 80%;
            animation: blinkStar 1.5s infinite 1s;
        }

        .active .ts4 {
            top: 10%;
            left: 40%;
            animation: blinkStar 4s infinite 0.2s;
        }

        .active .ts5 {
            top: 80%;
            left: 20%;
            animation: blinkStar 2.5s infinite 0.8s;
        }

        .active .ts6 {
            top: 50%;
            left: 10%;
            animation: blinkStar 3.5s infinite 1.2s;
        }

        .active .ts7 {
            top: 15%;
            left: 70%;
            animation: blinkStar 2.8s infinite 0.4s;
        }

        .active .ts8 {
            top: 90%;
            left: 80%;
            animation: blinkStar 3.2s infinite 1.5s;
        }

        .active .ts9 {
            top: 60%;
            left: 90%;
            animation: blinkStar 4.2s infinite 0.7s;
        }

        .active .ts10 {
            top: 30%;
            left: 60%;
            animation: blinkStar 3.8s infinite 0.1s;
        }




        @keyframes blinkStar {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.5);
            }
        }

        @keyframes shootStar {
            0% {
                top: 50px;
                right: -100px;
                opacity: 1;
                width: 100px;
            }

            20% {
                top: 400px;
                right: 400px;
                opacity: 0;
                width: 200px;
            }

            100% {
                top: 400px;
                right: 400px;
                opacity: 0;
            }
        }

        /* --- 6. MELODİ --- */
        .scene-music {
            background: #fff8e1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .bar {
            width: 15px;
            background: #ffb74d;
            border-radius: 5px;
            height: 20px;
        }

        .active .b1 {
            animation: eq 0.6s infinite alternate;
        }

        .active .b2 {
            animation: eq 0.8s infinite alternate;
        }

        .active .b3 {
            animation: eq 0.5s infinite alternate;
        }

        .active .b4 {
            animation: eq 0.7s infinite alternate;
        }

        .active .b5 {
            animation: eq 0.6s infinite alternate;
        }

        .floating-note {
            position: absolute;
            font-size: 24px;
            color: #333;
            opacity: 0;
        }

        .active .fn1 {
            left: 20%;
            animation: floatUp 2s infinite;
        }

        .active .fn2 {
            left: 80%;
            animation: floatUp 2.5s infinite;
        }

        @keyframes eq {
            0% {
                height: 20px;
            }

            100% {
                height: 100px;
                background: #e65100;
            }
        }

        @keyframes floatUp {
            0% {
                bottom: 0;
                opacity: 1;
            }

            100% {
                bottom: 100%;
                opacity: 0;
                transform: rotate(20deg);
            }
        }

        /* --- 7. KALP --- */
        .scene-love {
            background: #ffebee;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            perspective: 800px;
            transform-style: preserve-3d;
        }

        .core-heart {
            font-size: 50px;
            color: #d50000;
            z-index: 10;
            filter: drop-shadow(0 0 15px rgba(213, 0, 0, 0.6));
        }

        .active .core-heart {
            animation: corePulse 1s infinite;
        }

        .orbit-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120px;
            height: 120px;
            border: 2px solid rgba(233, 30, 99, 0.4);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transform-style: preserve-3d;
        }

        .satellite {
            position: absolute;
            top: -6px;
            left: 50%;
            width: 10px;
            height: 10px;
            background: #ff4081;
            border-radius: 50%;
            box-shadow: 0 0 10px #ff4081;
            transform: translateX(-50%);
        }

        .active .r1 {
            animation: orbitCross1 4s infinite linear;
        }

        .active .r2 {
            animation: orbitCross2 4s infinite linear;
        }

        .active .r3 {
            animation: orbitHorizontal 5s infinite linear;
        }

        @keyframes corePulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        @keyframes orbitCross1 {
            0% {
                transform: translate(-50%, -50%) rotateZ(45deg) rotateX(70deg) rotateZ(0deg)
            }

            100% {
                transform: translate(-50%, -50%) rotateZ(45deg) rotateX(70deg) rotateZ(360deg)
            }
        }

        @keyframes orbitCross2 {
            0% {
                transform: translate(-50%, -50%) rotateZ(-45deg) rotateX(70deg) rotateZ(0deg)
            }

            100% {
                transform: translate(-50%, -50%) rotateZ(-45deg) rotateX(70deg) rotateZ(360deg)
            }
        }

        @keyframes orbitHorizontal {
            0% {
                transform: translate(-50%, -50%) rotateX(80deg) rotateZ(0deg)
            }

            100% {
                transform: translate(-50%, -50%) rotateX(80deg) rotateZ(360deg)
            }
        }

        /* --- 8. SON SAYFA (ÖZEL ANİMASYON EKLENDİ) --- */
        .card.final-card {
            background: radial-gradient(circle at 50% 50%, #2e003e 0%, #000 100%);
            border: 2px solid #ff00de;
            box-shadow: 0 0 50px rgba(255, 0, 222, 0.3);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .aura {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255, 0, 222, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            z-index: 1;
        }

        .active .aura {
            animation: breathe 4s infinite ease-in-out;
        }

        /* Yüzen Parçacıklar (Sihirli Toz) */
        .particle {
            position: absolute;
            background: #fff;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 5px #fff, 0 0 10px #ff00de;
        }

        .active .p1 {
            width: 4px;
            height: 4px;
            left: 20%;
            bottom: -10px;
            animation: floatUpParticle 5s infinite linear;
        }

        .active .p2 {
            width: 6px;
            height: 6px;
            left: 80%;
            bottom: -20px;
            animation: floatUpParticle 7s infinite linear 1s;
        }

        .active .p3 {
            width: 3px;
            height: 3px;
            left: 50%;
            bottom: -15px;
            animation: floatUpParticle 6s infinite linear 2s;
        }

        .active .p4 {
            width: 5px;
            height: 5px;
            left: 30%;
            bottom: -30px;
            animation: floatUpParticle 8s infinite linear 0.5s;
        }

        .active .p5 {
            width: 2px;
            height: 2px;
            left: 70%;
            bottom: -10px;
            animation: floatUpParticle 4s infinite linear 1.5s;
        }

        @keyframes floatUpParticle {
            0% {
                bottom: -20px;
                opacity: 0;
                transform: translateX(0);
            }

            20% {
                opacity: 0.8;
            }

            50% {
                opacity: 0.4;
                transform: translateX(20px);
            }

            80% {
                opacity: 0.8;
            }

            100% {
                bottom: 100%;
                opacity: 0;
                transform: translateX(-20px);
            }
        }

        .final-text {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: #fff;
            text-shadow: 0 0 10px #ff00de, 0 0 20px #ff00de, 0 0 40px #ff00de;
            z-index: 10;
            margin-top: 20px;
            opacity: 0;
            transform: scale(0.8);
        }

        .active .final-text {
            animation: textAppear 2s forwards;
        }

        .infinity-symbol {
            font-size: 3rem;
            color: #ffd700;
            margin-bottom: 20px;
            z-index: 10;
            animation: floatIcon 3s infinite ease-in-out;
        }

        @keyframes breathe {

            0%,
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.5;
            }

            50% {
                transform: translate(-50%, -50%) scale(1.5);
                opacity: 0.8;
            }
        }

        @keyframes textAppear {
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes floatIcon {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        /* KONTROLLER */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .btn {
            background: linear-gradient(135deg, #1a1a2e, #000);
            border: 1px solid var(--gold-primary);
            color: #fff;
            padding: 12px 30px;
            border-radius: 30px;
            font-family: 'Montserrat', sans-serif;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .btn:hover {
            background: var(--gold-primary);
            color: #000;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            border-color: #555;
            background: #222;
            transform: none;
        }

        @media (max-width: 500px) {
            .scene {
                width: 92vw;
                height: 145vw;
            }

            .shimmer-text {
                font-size: 4rem;
            }

            h2 {
                font-size: 1.4rem;
            }
        }

        /* Müzik Çalar Tasarımı */
        .music-player-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            font-family: 'Montserrat', sans-serif;
        }

        #musicBtn {
            background: rgba(26, 11, 46, 0.8);
            border: 1px solid var(--gold-primary);
            color: var(--gold-primary);
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            letter-spacing: 1px;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #musicBtn:hover {
            background: var(--gold-primary);
            color: #000;
        }

        .music-list {
            position: absolute;
            top: 45px;
            left: 0;
            background: #fdfbf7;
            border: 1px solid var(--gold-primary);
            border-radius: 5px;
            width: 200px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .music-list.show {
            display: flex;
        }

        .music-option {
            padding: 12px 15px;
            font-size: 0.85rem;
            color: #2d2d2d;
            cursor: pointer;
            transition: 0.2s;
            border-bottom: 1px solid #eee;
            text-align: left;
        }

        .music-option:last-child {
            border-bottom: none;
        }

        .music-option:hover {
            background: #f0ede5;
            padding-left: 20px;
        }

        .music-option.stop-btn {
            color: #d32f2f;
            font-weight: bold;
        }

        /* Bilgi Kutusu */
        .emoji-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: #fdfbf7;
            border: 1px solid #d4af37;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            z-index: 9999;
            width: 280px;
            text-align: center;
            display: none;
            /* Varsayılan kapalı */
            opacity: 0;
            transition: 0.3s;
        }

        .emoji-popup.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        /* Kaydırma İpucu */
        .scroll-hint {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 500;
            color: #d4af37;
            text-align: center;
            font-size: 0.75rem;
            pointer-events: none;
            animation: fadePulse 2s infinite;
        }

        @keyframes fadePulse {
            0% {
                opacity: 0.2;
            }

            50% {
                opacity: 0.8;
            }

            100% {
                opacity: 0.2;
            }
        }

        .signature {
            font-family: "Great Vibes", "Allura", "Dancing Script", cursive;
            font-size: 28px;
            letter-spacing: 1px;
        }


        /* --- ÖZEL LİNK BUTONU (Müzik Butonu Tarzında) --- */
        .ozel-link-butonu {
            position: fixed;
            /* Eğer sağ üstte Müzik butonu varsa onun altına gelmesi için top değerini artırabilirsiniz (örn: 80px) */
            top: 25px;
            right: 25px;
            /* Sağ üst köşe */
            z-index: 5000;
            /* Açılış ekranının (9999) altında kalsın */

            /* Görünüm Ayarları */
            background: rgba(5, 5, 16, 0.6);
            /* Yarı saydam koyu zemin */
            backdrop-filter: blur(5px);
            /* Buzlu cam efekti */
            border: 1px solid var(--gold-primary);
            /* Altın çerçeve */
            color: var(--gold-primary);

            /* Yazı Tipi ve Düzeni */
            font-family: 'Montserrat', sans-serif;
            font-size: 0.9rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-decoration: none;
            /* Linkin alt çizgisini kaldırır */

            padding: 10px 24px;
            border-radius: 50px;
            /* Hap şeklinde yuvarlak kenarlar */

            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;

            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        /* Üzerine gelince yapılacaklar */
        .ozel-link-butonu:hover {
            background: var(--gold-primary);
            color: #050510;
            /* Yazı rengi siyaha dönsün */
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            /* Parlama */
            transform: translateY(-2px);
            /* Hafif yukarı zıplama */
        }

        /* AÇILIŞ EKRANI TASARIMI */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(5, 5, 16, 0.95);
            /* Sayfa arka planıyla uyumlu koyu ton */
            backdrop-filter: blur(8px);
            /* Arkadaki kartları hafifçe bulanıklaştırır */
            z-index: 9999;
            /* Her şeyin üstünde durması için */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease, visibility 1s ease;
        }

        .welcome-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .welcome-card {
            background-color: var(--paper-color);
            border: 2px solid var(--gold-primary);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.05);
            max-width: 90%;
            width: 400px;
            position: relative;
            transform: scale(1);
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .welcome-title {
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: var(--gold-primary);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .welcome-ornament {
            font-size: 1.5rem;
            color: var(--gold-shadow);
            margin: 10px 0 20px 0;
        }

        .welcome-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: var(--text-dark);
            line-height: 1.4;
            margin-bottom: 30px;
            font-weight: 600;
        }

        .welcome-btn {
            background: linear-gradient(135deg, var(--gold-primary) 0%, var(--gold-shadow) 100%);
            color: white;
            border: none;
            padding: 12px 35px;
            font-family: 'Montserrat', sans-serif;
            font-size: 1rem;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .welcome-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.6);
        }

        /* Mobilde başlığın çok büyük olmaması için */
        @media (max-width: 480px) {
            .welcome-title {
                font-size: 2.8rem;
            }

            .welcome-card {
                padding: 30px 20px;
            }
        }

        /* --- MOBİL İÇİN ÖZEL AYARLAR --- */
        @media (max-width: 768px) {

            /* Kutunun kendisini ekrana sığdırır */
            .welcome-content {
                padding: 1.5rem !important;
                /* İç boşluğu azaltır */
                width: 85% !important;
                /* Genişliği ayarlar */
                max-height: 85vh;
                /* Ekran yüksekliğinin %85'ini geçmesini engeller */
                overflow-y: auto;
                /* Eğer yazı çok uzunsa kaydırma (scroll) özelliği ekler */
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            /* Başlığı küçültür */
            .welcome-content h1 {
                font-size: 2.2rem !important;
                /* Yazı boyutunu küçültür */
                margin-bottom: 0.5rem !important;
                line-height: 1.2;
            }

            /* Açıklama yazısını küçültür */
            .welcome-content p {
                font-size: 1rem !important;
                line-height: 1.4;
                margin-bottom: 1.5rem !important;
            }

            /* Butonu daha görünür ve tıklanabilir yapar */
            .start-btn {
                padding: 12px 30px !important;
                font-size: 1rem !important;
                width: auto;
                margin-top: 10px;
            }
        }
    </style>
</head>

<body>
    <a href="kaos.html" target="_blank" class="ozel-link-butonu">
        <span>kaos</span> ➜
    </a>
    <div class="music-player-container">
        <button id="musicBtn"><span>♪</span> Müzik Seç</button>
        <div class="music-list" id="musicList">
            <div class="music-option" onclick="playMusic('senbenim.mp3')">
                Sen Benim Şarkılarımsın</div>
            <div class="music-option" onclick="playMusic('tencerekapak.mp3')">Tencere
                Kapak</div>
            <div class="music-option" onclick="playMusic('binpisman.mp3')">
                Bin Pişman</div>

            <div class="music-option stop-btn" onclick="stopMusic()">Müziği Durdur</div>
        </div>
    </div>

    <audio id="bgAudio" autoplay loop>
        <source src="tencerekapak.mp3" type="audio/mpeg">
    </audio>

    <div class="scene">
        <div class="stack">

            <!-- KART 1: KAPAK -->
            <div class="card cover-design" id="card0">
                <div class="ornament">⚜</div>
                <h1 class="shimmer-text">Elifnazım</h1>
                <p
                    style="letter-spacing: 5px; text-transform: uppercase; font-size: 0.8rem; margin-top: 20px; color: #ddd;">
                    Sessiz Bir Sevgiyle</p>
                <div
                    style="margin: 40px auto; width: 60px; height: 60px; border: 2px solid var(--gold-primary); border-radius: 50%; display:grid; place-items:center; font-size: 1.5rem; color: var(--gold-primary); box-shadow: 0 0 20px rgba(212,175,55,0.4);">
                    ∞</div>
                <p style="font-size: 0.75rem; opacity: 0.8; margin-top: auto;">14 Şubat 2026</p>
            </div>

            <!-- 2. GİRİŞ -->
            <div class="card" id="card1">
                <h2>İlk Sayfa</h2>
                <div class="type-area"
                    data-text="Bu sayfalar büyük sözler vermek için değil, seninle başlayan güzel bir hissi saklamak için var.">
                </div>
                <div class="ornament">❦</div>
                <span class="page-num">2 / 10</span>
            </div>

            <!-- 3. DÖNÜŞÜM -->
            <div class="card" id="card2">
                <h2>Değişen Bir Şeyler</h2>
                <div class="panel scene-weather">
                    <div class="sun-orb"></div>
                    <div class="lightning-flash"></div>
                    <div class="bolt"></div>
                    <div class="cloud-complex cc1"></div>
                    <div class="cloud-complex cc2"></div>
                    <div class="cloud-complex cc3"></div>

                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                    <div class="rain-drop rd"></div>
                </div>
                <div class="type-area"
                    data-text="Günler sıradandı, seninle birlikte içime küçük bir güneş doğdu artık bir amacım ve hedefim varmış gibi hissediyorum.">
                </div>
                <span class="page-num">3 / 10</span>
            </div>

            <!-- 4. GÜVEN -->
            <div class="card" id="card3">
                <h2>Güven</h2>
                <div class="panel scene-lighthouse">
                    <div class="ocean-waves">
                        <div class="wave-shape"></div>
                    </div>
                    <div class="rock-base"></div>
                    <div class="lighthouse-tower"></div>
                    <div class="lantern-room"></div>
                    <div class="beacon-beam"></div>
                </div>
                <div class="type-area"
                    data-text="Yanında kendim gibi olabiliyorum; bu bana iyi geliyor. Seninle daha huzurlu ve güvendeyim sanki.">
                </div>
                <span class="page-num">4 / 10</span>
            </div>

            <!-- 5. YOLCULUK -->
            <div class="card" id="card4">
                <h2>Birlikte</h2>
                <div class="panel scene-road">
                    <div class="road-3d">
                        <div class="stripe-dashed"></div>
                    </div>
                </div>
                <div class="type-area"
                    data-text="Nereye gittiğimizden çok, Hayatımda olman güzel. Seninle her an keyifli ve heyecan verici oluyor. ">
                </div>
                <span class="page-num">5 / 10</span>
            </div>

            <!-- 6. MELODİ -->
            <div class="card" id="card5">
                <h2>Melodim</h2>
                <div class="panel scene-music">
                    <div class="bar b1"></div>
                    <div class="bar b2"></div>
                    <div class="bar b3"></div>
                    <div class="bar b4"></div>
                    <div class="bar b5"></div>
                    <div class="floating-note fn1">♪</div>
                    <div class="floating-note fn2">♫</div>
                </div>
                <div class="type-area" data-text="Sesini duyunca yüzümde istemsiz bir gülümseme oluyor.
Keşke sabaha kadar konuşsan güzel sesinle.">
                </div>
                <span class="page-num">6 / 10</span>
            </div>

            <!-- 7. ZAMAN -->
            <div class="card" id="card6">
                <h2>Zaman</h2>
                <div class="panel scene-time">
                    <div class="glass-container">
                        <div class="glass-top">
                            <div class="sand-u"></div>
                        </div>
                        <div class="stream"></div>
                        <div class="glass-bot">
                            <div class="sand-l"></div>
                        </div>
                    </div>
                </div>
                <div class="type-area"
                    data-text="Seninle geçen her saniye, ömrüme ömür katıyor zamanın ağırlığı var. Keşke Hep Yanında Olabilsem">
                </div>
                <span class="page-num">7 / 10</span>
            </div>

            <!-- 8. GÖKYÜZÜM (GELİŞTİRİLMİŞ) -->
            <div class="card" id="card7">
                <h2>Gökyüzüm</h2>
                <div class="panel scene-moon">
                    <div class="moon-glow">
                        <div class="crater cr1"></div>
                        <div class="crater cr2"></div>
                    </div>
                    <!-- 10 Adet Yıldız -->
                    <div class="tiny-star ts1"></div>
                    <div class="tiny-star ts2"></div>
                    <div class="tiny-star ts3"></div>
                    <div class="tiny-star ts4"></div>
                    <div class="tiny-star ts5"></div>
                    <div class="tiny-star ts6"></div>
                    <div class="tiny-star ts7"></div>
                    <div class="tiny-star ts8"></div>
                    <div class="tiny-star ts9"></div>
                    <div class="tiny-star ts10"></div>
                </div>
                <div class="type-area" data-text="Gece olunca gökyüzü daha sade görünüyor.
Günün telaşı bitince insan neyin iyi geldiğini fark ediyor.
Ben de o an seni düşünüyorum;
içimde sakin bir yer açılıyor. Orada parlayan en güzel yıldız sensin.">
                </div>
                <span class="page-num">8 / 10</span>
            </div>

            <!-- 9. KALP RİTMİ -->
            <div class="card" id="card8">
                <h2>Sakin Bir Yer</h2>
                <div class="panel scene-love">
                    <div class="core-heart">❤</div>
                    <div class="orbit-ring r1">
                        <div class="satellite"></div>
                    </div>
                    <div class="orbit-ring r2">
                        <div class="satellite"></div>
                    </div>
                    <div class="orbit-ring r3">
                        <div class="satellite"></div>
                    </div>
                </div>
                <div class="type-area"
                    data-text="Bu Hisleri Yaşarken Daha Anlamlı Hissediyorum. İyiki Hayatıma Girdin Bunları Yazarken Seni Düşünmek Bile Yeterli Oluyor. Sen Hep Mutlu Kal, Ben de Senin Mutluluğuna Mutlu Olacağım.">
                </div>
                <span class="page-num">9 / 10</span>
            </div>


            <!-- 10. SON (ÖZEL PARÇACIK ANİMASYONU) -->
            <div class="card final-card" id="card9">
                <div class="infinity-symbol">∞</div>
                <div style="font-size: 0.9rem; color:#ccc; z-index: 10;">Şapşal Elifim</div>

                <div class="aura"></div>

                <!-- Sihirli Parçacıklar -->
                <div class="particle p1"></div>
                <div class="particle p2"></div>
                <div class="particle p3"></div>
                <div class="particle p4"></div>
                <div class="particle p5"></div>

                <div class="final-text">Seni<br>Seviyorum</div>

                <p style="font-size: 0.8rem; margin-top: 30px; letter-spacing: 4px; color: #fff; z-index: 10;">HEMDE ÇOK
                </p>
                <span class="page-num signature">cagdas</span>

            </div>

        </div>
    </div>

    <div class="controls">
        <button class="btn" id="prevBtn" onclick="goPrev()">&#10094;</button>
        <button class="btn" id="nextBtn" onclick="goNext()">&#10095;</button>
    </div>

    <div id="emojiPopup" class="emoji-popup">
        <p style="font-family: serif; color: #333;">(❦), metinlerdeki derin bağı ve zarafeti, içten ve büyüyen bir
            sevgiyi sessiz ve estetik bir şekilde ifade eden süslemeli kalp sembolüdür..</p>
        <button onclick="closeEmojiPopup()"
            style="background:none; border:1px solid #d4af37; color:#d4af37; padding:5px 10px; cursor:pointer; margin-top:10px;">Tamam</button>
    </div>

    <div id="scrollHint" class="scroll-hint">
        <div style="font-size: 1.5rem;">◄ ►</div>
        <span>Kaydırarak Başla</span>
    </div>
    <div id="welcome-overlay" class="welcome-overlay">
        <div class="welcome-card">
            <h1 class="welcome-title">Hoş Geldin</h1>
            <div class="welcome-ornament"> ❦ </div>
            <p class="welcome-text">
                Canım benim aradan 70 gün geçti bile zaman öyle hızlı ki neye nasıl şaşıracağımı bilmiyorum
                seninle hayatın bir yerinde tekrar denk gelmek gerçekten tarif edilemez bir merak hissi yaratıyor
                bende belki de bu uygundur diyorum ama onca şeyden öte senin zamanla konuşmanı ve bana karşı tutumun çok
                hoşuma gitmeye başladı iyi ki hayatıma girdin diyorum zamanla her şeyin daha iyi olması dileğiyle
                <br>
                Hazırsan başlayalım mı?
            </p>
            <button class="welcome-btn" onclick="window.closeWelcome()">Giriş Yap</button>
        </div>
    </div>
    <script>
        const cards = document.querySelectorAll('.card');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        let currentIndex = 0;
        const totalCards = cards.length;
        let typeWriterTimeout;

        // --- YENİ EKLENEN DEĞİŞKENLER ---
        const musicAudio = document.getElementById('bgAudio');
        const musicBtn = document.getElementById('musicBtn');
        const musicList = document.getElementById('musicList');
        const myEmojiPopup = document.getElementById('emojiPopup');
        const myScrollHint = document.getElementById('scrollHint');

        function initStack() {
            cards.forEach((card, index) => {
                card.style.zIndex = totalCards - index;
                card.classList.remove('active');
            });
            updateUI();
        }

        function typeWriter(element, text, speed = 40) {
            element.innerHTML = "";
            let i = 0;
            const cursor = document.createElement('span');
            cursor.className = 'cursor';
            element.appendChild(cursor);

            function type() {
                if (i < text.length) {
                    cursor.insertAdjacentHTML('beforebegin', text.charAt(i));
                    i++;
                    typeWriterTimeout = setTimeout(type, speed);
                } else {
                    if (cursor) cursor.remove();
                }
            }
            type();
        }

        function activateCard(index) {
            const card = cards[index];
            card.classList.remove('active');
            void card.offsetWidth;
            card.classList.add('active');

            clearTimeout(typeWriterTimeout);
            document.querySelectorAll('.cursor').forEach(c => c.remove());

            const typeArea = card.querySelector('.type-area');
            if (typeArea) {
                const text = typeArea.getAttribute('data-text');
                typeWriter(typeArea, text);
            }
        }

        // --- YENİ: NAVİGASYONDA TETİKLENEN TEMİZLİK ---
        function cleanupOverlayEffects() {
            // 1. Emoji kutusu açıksa kapat
            if (myEmojiPopup && myEmojiPopup.classList.contains('active')) {
                myEmojiPopup.classList.remove('active');
            }
            // 2. Kaydırma ipucu varsa gizle
            if (myScrollHint) {
                myScrollHint.style.opacity = '0';
                setTimeout(() => myScrollHint.remove(), 500);
            }
        }

        function goNext() {
            if (currentIndex < totalCards - 1) {
                cleanupOverlayEffects(); // Ekranı temizle
                const currentCard = cards[currentIndex];
                currentCard.classList.add('flipped');
                currentIndex++;
                activateCard(currentIndex);
                updateUI();
            }
        }

        function goPrev() {
            if (currentIndex > 0) {
                cleanupOverlayEffects(); // Ekranı temizle
                currentIndex--;
                const prevCard = cards[currentIndex];
                prevCard.classList.remove('flipped');
                activateCard(currentIndex);
                updateUI();
            }
        }

        function updateUI() {
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === totalCards - 1;
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === "ArrowRight") goNext();
            if (e.key === "ArrowLeft") goPrev();
        });

        let touchStart = 0;
        document.querySelector('.scene').addEventListener('touchstart', e => {
            touchStart = e.changedTouches[0].screenX;
        }, { passive: true });

        document.querySelector('.scene').addEventListener('touchend', e => {
            let touchEnd = e.changedTouches[0].screenX;
            if (touchStart - touchEnd > 50) goNext();
            if (touchEnd - touchStart > 50) goPrev();
        }, { passive: true });

        // --- YENİ: EMOJİ TIKLAMA DİNLEYİCİSİ ---
        document.addEventListener('click', function (e) {
            // ❦ simgesine tıklandığında popup aç
            if (e.target.innerText === '❦' || e.target.classList.contains('emoji-trigger')) {
                myEmojiPopup.classList.add('active');
            }
        });

        window.closeEmojiPopup = function () {
            myEmojiPopup.classList.remove('active');
        };

        // --- MÜZİK KONTROLLERİ ---
        if (musicBtn && musicList) {
            musicBtn.addEventListener('click', (e) => {
                musicList.classList.toggle('show');
                e.stopPropagation();
            });

            document.addEventListener('click', () => {
                musicList.classList.remove('show');
            });
        }

        window.playMusic = function (url) {
            musicAudio.src = url;
            musicAudio.play().catch(e => console.log("Etkileşim bekleniyor..."));
            musicList.classList.remove('show');
            if (musicBtn.querySelector('span')) musicBtn.querySelector('span').innerText = '♫';
        };

        window.stopMusic = function () {
            musicAudio.pause();
            musicAudio.currentTime = 0;
            musicList.classList.remove('show');
            if (musicBtn.querySelector('span')) musicBtn.querySelector('span').innerText = '♪';
        };

        function initializeMusic() {
            musicAudio.play().then(() => {
                document.removeEventListener('click', initializeMusic);
                document.removeEventListener('touchstart', initializeMusic);
                document.removeEventListener('scroll', initializeMusic);
            }).catch(() => { });
        }

        document.addEventListener('click', initializeMusic);
        document.addEventListener('touchstart', initializeMusic);
        document.addEventListener('scroll', initializeMusic);

        initStack();
        window.closeWelcome = function () {
            const overlay = document.getElementById('welcome-overlay');
            if (overlay) {
                overlay.classList.add('hidden');

                // Müziği tetiklemek için mevcut fonksiyonunu çağırıyoruz
                if (typeof initializeMusic === 'function') {
                    initializeMusic();
                }
            } else {
                console.error("Hata: welcome-overlay id'li kutu bulunamadı!");
            }
        };
    </script>

</body>

</html>
